<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.loanscrefia.common.member.repository.MemberRepository">
    <select id="save" parameterType="signup" resultType="signup">
	    <!-- MemberRepository.save -->
		INSERT INTO TB_LC_MEMBERS
		(
			 MEMBER_ID                     	/*담당자ID*/
			,PASSWORD                      	/*비밀번호*/
			,COM_CODE                      	/*회원사코드*/
			,MEMBER_NAME                   	/*담당자이름*/
			,EMAIL                         	/*이메일*/
			,MOBILE_NO                     	/*전화번호*/
			,DEPT_NM                       	/*부서명*/
			,POSITION_NM                  	/*직위명*/
			,JOIN_DT						/*가입일*/
			,FILE_SEQ                      	/*첨부파일ID*/
		)
		VALUES
		(
		 	 #{memberId}                    /*로그인ID*/ 
			,#{password}                    /*비밀번호*/  
			,#{comCode}                   	/*회원사코드*/ 
			,#{memberName}                  /*담당자이름*/  
			,#{email}                       /*이메일*/   
			,#{mobileNo}                    /*전화번호*/  
			,#{deptNm}                      /*부서명*/   
			,#{positionNm}                  /*직위명*/   
			,TO_CHAR(NOW(), 'YYYYMMDD')		/*가입일*/   
			,#{fileSeq}						/*첨부파일ID*/
		)	
	</select>
	
    <select id="findByEmail" parameterType="signup" resultType="signup">
	    <!-- MemberRepository.findByEmail -->
	    select *
	    from TB_LC_MEMBERS
	    where email = #{findByEmail}
    </select>
   
    
    <select id="findRoles" parameterType="signup" resultType="memberRole">
	    <!-- MemberRoleRepository.findRoles -->
	    select *
	    from tbl_member_role
	    where member_no = #{memberNo}
    </select>
    
    <update id="loginFailCnt" parameterType="string" >
    	UPDATE TB_LC_MEMBERS
    	SET fail_cnt = fail_cnt+1
    	WHERE email = #{email}
    </update>
    
    
    <select id="getMember" parameterType="signup" resultType="signup">
	    select *
	    from TB_LC_MEMBERS
	    where member_no = #{memberNo}
    </select>
    
</mapper> 